
    /*<link rel="icon" type="image/png" href="img/avatar.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">*/

:root {
    --c-green: #84FAB0;
    --c-blue: #8FD3F4;
    --c-black: #050505;
    --c-dark: #0f0f0f;
    --c-text: #f0f0f0;
    --grad: linear-gradient(135deg, var(--c-green), var(--c-blue));
    --f-head: 'Dela Gothic One', cursive;
    --f-body: 'Space Mono', monospace;
    --rad: 12px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    scrollbar-width: thin;
    scrollbar-color: var(--c-green) var(--c-black);
    -webkit-tap-highlight-color: transparent;
}

body {
    background-color: var(--c-black);
    color: var(--c-text);
    font-family: var(--f-body);
    height: 100vh;
    overflow: hidden;
    /*display: flex;
    justify-content: center;
    align-items: center;*/
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(132, 250, 176, 0.05) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(143, 211, 244, 0.05) 0%, transparent 20%);
}

.bg-noise {
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200vh;
    pointer-events: none;
    z-index: 1;
    opacity: 0.06;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
    animation: noiseAnim .2s infinite;
}

@keyframes noiseAnim {
    0% { transform: translate(0,0) }
    10% { transform: translate(-5%,-5%) }
    20% { transform: translate(-10%,5%) }
    30% { transform: translate(5%,-10%) }
    40% { transform: translate(-5%,15%) }
    50% { transform: translate(-10%,5%) }
    60% { transform: translate(15%,0) }
    70% { transform: translate(0,10%) }
    80% { transform: translate(-15%,0) }
    90% { transform: translate(10%,5%) }
    100% { transform: translate(5%,0) }
}


.interface {
    width: 95vw;
    height: 90vh;
    background: rgba(10, 10, 10, 0.85);
    border: 1px solid rgba(132, 250, 176, 0.3);
    backdrop-filter: blur(15px);
    border-radius: var(--rad);
    display: flex;
    position: relative;
    z-index: 10;
    box-shadow: 0 0 50px rgba(132, 250, 176, 0.1);
    overflow: hidden;
}

.sidebar {
    width: 280px;
    background: rgba(0, 0, 0, 0.6);
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    padding: 2rem;
    flex-shrink: 0;
    z-index: 20;
}

.container {
    display: flex; 
    flex-direction: row; 
    gap: 2em; 
    margin-left: 280px;
    height: 100%;
}

.lessons {
    flex: 1
}

.new-lesson {
    flex: 0 0 300px; 
    flex-shrink: 0;
    transition: all 0.3s ease;
}

.logo {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
}

.logo img {
    width: 40px;
    height: 40px;
    object-fit: contain;
    filter: drop-shadow(0 0 5px var(--c-green));
}

.brand {
    font-family: var(--f-head);
    font-size: 1.2rem;
    background: var(--grad);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: 1px;
}

.nav {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    flex-grow: 1;
}

.nav-btn {
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.6);
    font-family: var(--f-body);
    text-align: left;
    padding: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
    font-size: 0.8rem;
    border-radius: 6px;
}

.nav-btn:hover {
    color: var(--c-green);
    background: rgba(132, 250, 176, 0.05);
}

.nav-btn.active {
    color: var(--c-black);
    background: var(--grad);
    font-weight: bold;
    box-shadow: 0 0 15px rgba(132, 250, 176, 0.3);
}

.socials {
    display: flex;
    gap: 10px;
    margin-top: auto;
}

.social-btn {
    flex: 1;
    height: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    background: var(--grad);
    border-radius: 6px;
    transition: transform 0.2s;
}

.social-btn:hover {
    transform: translateY(-2px);
}

.social-icon {
    width: 20px;
    height: 20px;
    display: block;
}

.main {
    flex: 1;
    position: relative;
    overflow-y: auto;
    overflow-x: hidden;
    scroll-behavior: smooth;
}

.section {
    display: none;
    padding: 3rem 4rem;
    animation: fadeIn 0.4s ease-out;
    min-height: 100%;
}

.section.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

h1 {
    font-family: var(--f-head);
    font-size: clamp(2rem, 4vw, 4rem);
    line-height: 1;
    margin-bottom: 1rem;
    letter-spacing: -2px;
}

.txt-grad {
    background: var(--grad);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

h2 {
    font-family: var(--f-head);
    font-size: 1.5rem;
    margin: 2rem 0 1rem 0;
    color: var(--c-blue);
}

p {
    line-height: 1.6;
    margin-bottom: 1.5rem;
    color: rgba(255, 255, 255, 0.8);
    max-width: 700px;
}

.tag {
    display: inline-block;
    padding: 0.4rem 0.8rem;
    border: 1px solid var(--c-green);
    color: var(--c-green);
    font-size: 0.7rem;
    margin-bottom: 1rem;
    text-transform: uppercase;
    font-weight: bold;
    letter-spacing: 1px;
}

.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 1.5rem;
    border-radius: var(--rad);
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.card:hover {
    border-color: var(--c-blue);
    transform: translateY(-3px);
    background: rgba(255, 255, 255, 0.04);
}

.card h3 {
    font-family: var(--f-head);
    margin-bottom: 0.5rem;
    color: var(--c-text);
}

.card li {
    list-style: none;
    margin-bottom: 0.5rem;
    padding-left: 1rem;
    position: relative;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.6);
}

.card li::before {
    content: '>';
    position: absolute;
    left: 0;
    color: var(--c-green);
}

.code {
    background: #000;
    border: 1px solid var(--c-green);
    border-radius: 6px;
    color: var(--c-green);
    margin: 2rem 0;
    position: relative;
    font-size: 0.85rem;
}

.code-scroll {
    overflow-x: auto;
    padding: 1.5rem;
    white-space: pre;
}

.code::after {
    content: 'TERMINAL';
    position: absolute;
    top: -10px;
    right: 15px;
    background: var(--c-black);
    padding: 0 8px;
    font-size: 0.7rem;
    color: var(--c-blue);
    border: 1px solid var(--c-green);
}

.roadmap-item {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 3rem;
    position: relative;
}

.roadmap-line {
    position: absolute;
    left: 14px;
    top: 0;
    bottom: -3rem;
    width: 2px;
    background: rgba(255, 255, 255, 0.1);
}


.endpoints {
    position: absolute;
    left: 14px;
    top: 0;
    bottom: -3rem;
    width: auto;
}

.roadmap-item:last-child .roadmap-line {
    display: none;
}

.status-dot {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #000;
    border: 2px solid var(--c-green);
    flex-shrink: 0;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 5px;
}

.status-dot.future {
    border-color: rgba(255, 255, 255, 0.3);
}

.status-dot::after {
    content: '';
    width: 10px;
    height: 10px;
    background: var(--c-green);
    border-radius: 50%;
}

.status-dot.future::after {
    background: rgba(255, 255, 255, 0.3);
}

.roadmap-content {
    flex-grow: 1;
}

.roadmap-content h4 {
    font-family: var(--f-head);
    font-size: 1.3rem;
    color: var(--c-green);
    margin-bottom: 0.5rem;
}

.roadmap-content span {
    display: block;
    font-size: 0.8rem;
    color: var(--c-blue);
    margin-bottom: 1rem;
}

/* ==================== CONTACT STYLES ==================== */
.contact-wrapper {
    max-width: 600px;
    margin-top: 2rem;
    position: relative;
    min-height: 400px;
}

.form-group {
    margin-bottom: 2rem;
}

.form-group label {
    display: block;
    font-family: var(--f-head);
    color: var(--c-green);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    letter-spacing: 1px;
}

.cyber-input {
    width: 100%;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 1rem;
    color: var(--c-text);
    font-family: var(--f-body);
    font-size: 1rem;
    border-radius: 8px;
    outline: none;
    transition: all 0.3s ease;
}

.cyber-input:focus {
    border-color: var(--c-green);
    box-shadow: 0 0 15px rgba(132, 250, 176, 0.2);
    background: rgba(132, 250, 176, 0.05);
}

.submit-btn {
    border: none;
    cursor: pointer;
    width: 100%;
    position: relative;
    overflow: hidden;
}

.submit-btn.loading {
    pointer-events: none;
}

.submit-btn.loading .btn-text {
    visibility: hidden;
}

.submit-btn.loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 0%;
    background: rgba(0, 0, 0, 0.2);
    animation: loadingBar 1.5s ease forwards;
}

@keyframes loadingBar {
    0% { width: 0%; }
    100% { width: 100%; }
}

.success-container {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    animation: fadeIn 0.5s ease;
}

.success-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 2px solid var(--c-green);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
    box-shadow: 0 0 30px rgba(132, 250, 176, 0.3);
}

.success-icon svg {
    fill: none;
    stroke: var(--c-green);
    stroke-width: 2;
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    animation: drawCheck 1s ease forwards 0.3s;
}

@keyframes drawCheck {
    to { stroke-dashoffset: 0; }
}

.stat-bar {
    display: flex;
    justify-content: space-between;
    padding: 0.8rem;
    background: rgba(132, 250, 176, 0.05);
    margin-bottom: 0.5rem;
    border-radius: 4px;
    font-size: 0.85rem;
}

.table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 2rem;
    font-size: 0.9rem;
}

.table th, .table td {
    padding: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
}

.table th {
    background: rgba(255, 255, 255, 0.03);
    color: var(--c-blue);
    font-family: var(--f-head);
    text-align: center;
}

.check { color: var(--c-green); }
.warn { color: #ffa502; }
.cross { color: #ff4757; }

.cta {
    display: inline-block;
    padding: 1rem 2rem;
    background: var(--grad);
    color: var(--c-black);
    font-family: var(--f-head);
    text-decoration: none;
    border-radius: 30px;
    margin-top: 2rem;
    transition: transform 0.2s;
    border: none;
    cursor: pointer;
    font-size: 1rem;
}

.cta:hover {
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(132, 250, 176, 0.4);
}

.bg-text {
    position: absolute;
    font-family: var(--f-head);
    font-size: 15rem;
    opacity: 0.02;
    right: -50px;
    top: 100px;
    color: var(--c-text);
    pointer-events: none;
    white-space: nowrap;
}

/* ==================== DEMO STYLES (from file 1) ==================== */
.demo-box {
    display: flex;
    gap: 1.5rem;
    margin-top: 2rem;
    height: 500px;
}

.topo {
    flex: 2;
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(132, 250, 176, 0.3);
    border-radius: var(--rad);
    position: relative;
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    grid-template-rows: repeat(2, minmax(0, 1fr));
    gap: 1rem;
    padding: 2rem 1rem 1rem 1rem;
    overflow: hidden;
}

.topo::before {
    content: '/// NETWORK';
    position: absolute;
    top: 8px;
    left: 12px;
    font-size: 0.6rem;
    color: rgba(132, 250, 176, 0.5);
    letter-spacing: 2px;
}

.panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    height: 100%;
    min-height: 0;
    min-width: 280px;
}

.actions {
    flex: 1;
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 1rem;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.logs {
    height: 150px;
    flex-shrink: 0;
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 0.8rem;
    display: flex;
    flex-direction: column;
}

.log-list {
    flex: 1;
    overflow-y: auto;
    font-size: 0.7rem;
    line-height: 1.5;
    font-family: var(--f-body);
}

.log-item {
    padding: 2px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.log-item span {
    opacity: 0.5;
    margin-right: 5px;
}

.log-success { color: var(--c-green); }
.log-err { color: #ff4757; }

.dev {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: 0.3s;
    height: 100%;
    width: 100%;
    position: relative;
}

.dev.active {
    border-color: var(--c-green);
    box-shadow: 0 0 15px rgba(132, 250, 176, 0.2);
}

.dev.hub {
    grid-column: 2 / 4;
    grid-row: 2;
    background: linear-gradient(135deg, rgba(132, 250, 176, 0.05), rgba(143, 211, 244, 0.05));
}

.svg-icon {
    width: 32px;
    height: 32px;
    stroke: var(--c-text);
    stroke-width: 1.5;
    fill: none;
    margin-bottom: 5px;
    flex-shrink: 0;
    display: block;
}

.dev-name {
    font-family: var(--f-head);
    font-size: 0.65rem;
    margin-bottom: 2px;
}

.dev-bal {
    font-size: 0.8rem;
    color: var(--c-green);
    font-weight: bold;
}

.dev-st {
    font-size: 0.6rem;
    opacity: 0.6;
    height: 12px;
    overflow: hidden;
    white-space: nowrap;
}

.batt {
    width: 60%;
    height: 3px;
    background: rgba(255, 255, 255, 0.1);
    margin-top: 5px;
    border-radius: 2px;
}

.batt-fill {
    height: 100%;
    background: var(--c-green);
    width: 80%;
    transition: width 0.5s;
}

.act-btn {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 0.7rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--c-text);
    font-family: var(--f-body);
    font-size: 0.75rem;
    cursor: pointer;
    transition: 0.2s;
    text-align: left;
    flex-shrink: 0;
}

.act-btn:hover {
    background: rgba(132, 250, 176, 0.1);
    border-color: var(--c-green);
}

.act-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-icon {
    width: 16px;
    height: 16px;
    margin-right: 10px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2;
    flex-shrink: 0;
}

.act-txt { flex: 1; }
.act-cost { font-size: 0.65rem; color: var(--c-green); opacity: 0.8; }

.tx-line {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 20;
}

.tx-p {
    fill: none;
    stroke: url(#g);
    stroke-width: 3;
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    animation: d 0.6s ease forwards;
}

@keyframes d { to { stroke-dashoffset: 0; } }

.stats {
    display: flex;
    justify-content: space-between;
    padding: 1rem;
    background: rgba(132, 250, 176, 0.05);
    border-radius: 8px;
    margin-top: 1rem;
}

.st-item { text-align: center; }
.st-val { font-family: var(--f-head); color: var(--c-green); font-size: 1.1rem; display: block; }
.st-lbl { font-size: 0.6rem; opacity: 0.5; }

/* ==================== MOBILE RESPONSIVE ==================== */

@media (max-width: 768px){
    .container {
        flex-direction: column;
        margin-left: 0
    }
    .lessons, .new-lesson {
        width: 100%
    }
}

/*@media (max-width: 768px) {
    body {
        height: auto;
        overflow-y: auto;
        align-items: flex-start;
    }

    .interface {
        width: 100%;
        height: auto;
        min-height: 100vh;
        border: none;
        border-radius: 0;
        flex-direction: column;
    }

    .sidebar {
        width: 100%;
        padding: 1rem;
        border-right: none;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        position: sticky;
        top: 0;
        background: rgba(5, 5, 5, 0.95);
        backdrop-filter: blur(10px);
        z-index: 50;
    }

    .logo {
        margin-bottom: 1rem;
        justify-content: space-between;
    }

    .socials {
        position: absolute;
        top: 1.2rem;
        right: 1rem;
        margin: 0;
    }

    .nav {
        flex-direction: row;
        overflow-x: auto;
        padding-bottom: 5px;
        gap: 0.5rem;
    }

    .nav::-webkit-scrollbar { display: none; }

    .nav-btn {
        padding: 0.5rem 1rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 20px;
        white-space: nowrap;
    }

    .nav-btn.active {
        background: var(--c-green);
        color: var(--c-black);
    }

    .section {
        padding: 2rem 1.5rem;
        overflow: hidden;
    }

    .bg-text {
        font-size: 5rem;
        top: 80px;
        opacity: 0.02;
    }

    .grid {
        grid-template-columns: 1fr;
    }

    .table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
    }

    .demo-box {
        flex-direction: column;
        height: auto;
    }

    .topo {
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto;
        height: auto;
        gap: 0.8rem;
        padding: 2.5rem 0.8rem 0.8rem 0.8rem;
    }

    .dev {
        min-height: 130px;
        padding: 0.8rem;
    }

    .dev.hub {
        grid-column: 1 / -1;
    }

    .panel {
        width: 100%;
        min-width: 0;
        height: auto;
    }

    .actions {
        max-height: 250px;
    }

    .tx-line { display: none; }
}*/

/* ==================== DASHBOARD STYLES ==================== */
.dash-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 2px solid var(--c-green);
}

.user-name {
    font-family: var(--f-head);
    color: var(--c-green);
}

.user-email {
    font-size: 0.8rem;
    opacity: 0.6;
}

.auth-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.8rem 1.5rem;
    background: var(--grad);
    border: none;
    border-radius: 6px;
    color: var(--c-black);
    font-family: var(--f-body);
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}

.auth-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(132, 250, 176, 0.3);
}

.auth-btn svg {
    width: 20px;
    height: 20px;
}

.logout-btn {
    background: transparent;
    border: 1px solid rgba(255, 107, 107, 0.5);
    color: #ff6b6b;
}

.logout-btn:hover {
    background: rgba(255, 107, 107, 0.1);
    box-shadow: 0 5px 20px rgba(255, 107, 107, 0.2);
}

.dash-content {
    display: none;
}

.dash-content.visible {
    display: block;
}

.login-prompt {
    text-align: center;
    padding: 4rem 2rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px dashed rgba(255, 255, 255, 0.2);
    border-radius: var(--rad);
}

.login-prompt h3 {
    font-family: var(--f-head);
    margin-bottom: 1rem;
    color: var(--c-blue);
}

.login-prompt p {
    max-width: 400px;
    margin: 0 auto 2rem auto;
}

.create-robot-form {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(132, 250, 176, 0.3);
    border-radius: var(--rad);
    padding: 1.5rem;
    margin-bottom: 2rem;
}

.form-row {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    align-items: flex-end;
    justify-content: left;
}


.new-lesson-form {
    flex: 1 auto;
    position: sticky;
    /*width: 348px;*/
    height: 500px;
    max-height: 600px;
    left: 152px;
    overflow: auto;
    width: 100%; 
    height: auto;
}

.new-lesson-form label {
    display: block;
    font-size: 0.7rem;
    color: var(--c-blue);
    margin-bottom: 0.5rem;
    text-transform: uppercase;
}

.new-lesson-form input {
    width: 100%;
    padding: 0.8rem;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    color: var(--c-text);
    font-family: var(--f-body);
    font-size: 0.9rem;
}

.new-lesson-form textarea {
    width: 100%;
    max-height: 70px;
    padding: 0.8rem;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    color: var(--c-text);
    font-family: var(--f-body);
    font-size: 0.9rem;
    resize: vertical;
}

.new-lesson-form input:focus, .new-lesson-form textarea:focus {
    outline: none;
    border-color: var(--c-green);
}

.form-field {
    flex: 1;
    min-width: 200px;
}

.form-field label {
    display: block;
    font-size: 0.7rem;
    color: var(--c-blue);
    margin-bottom: 0.5rem;
    text-transform: uppercase;
}

.form-field input, .form-field textarea {
    width: 100%;
    padding: 0.8rem;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    color: var(--c-text);
    font-family: var(--f-body);
    font-size: 0.9rem;
}

.form-field input:focus, .form-field textarea:focus {
    outline: none;
    border-color: var(--c-green);
}

.create-btn {
    padding: 0.8rem 2rem;
    background: var(--grad);
    border: none;
    border-radius: 6px;
    color: var(--c-black);
    font-family: var(--f-body);
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.create-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(132, 250, 176, 0.3);
}

.create-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.robots-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.5rem;
}

.robot-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--rad);
    padding: 1.5rem;
    transition: all 0.3s;
}

.robot-card:hover {
    border-color: var(--c-green);
    transform: translateY(-3px);
}

.robot-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.robot-name {
    font-family: var(--f-head);
    font-size: 1.1rem;
    color: var(--c-green);
}

.robot-id {
    font-size: 0.7rem;
    opacity: 0.5;
}

.robot-status {
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    font-size: 0.7rem;
    text-transform: uppercase;
}

.robot-status.active {
    background: rgba(132, 250, 176, 0.2);
    color: var(--c-green);
}

.robot-credits {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.credits-value {
    font-family: var(--f-head);
    font-size: 2rem;
    color: var(--c-blue);
}

.credits-label {
    font-size: 0.8rem;
    opacity: 0.6;
}

.api-key-box {
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    padding: 0.8rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.api-key-text {
    flex: 1;
    font-family: var(--f-body);
    font-size: 0.75rem;
    color: var(--c-green);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.api-key-text.hidden {
    filter: blur(4px);
    user-select: none;
}

.icon-btn {
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    padding: 0.3rem;
    transition: color 0.2s;
}

.icon-btn:hover {
    color: var(--c-green);
}

.icon-btn svg {
    width: 16px;
    height: 16px;
}

.robot-actions {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.robot-action-btn {
    flex: 1;
    min-width: 80px;
    padding: 0.6rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--c-text);
    font-family: var(--f-body);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
    margin: 0.6em;
}

.robot-action-btn:hover {
    background: rgba(132, 250, 176, 0.1);
    border-color: var(--c-green);
}

.robot-action-btn.danger {
    border-color: rgba(255, 107, 107, 0.3);
}

.robot-action-btn.danger:hover {
    background: rgba(255, 107, 107, 0.1);
    border-color: #ff6b6b;
    color: #ff6b6b;
}

.robot-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.7rem;
    opacity: 0.5;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px dashed rgba(255, 255, 255, 0.2);
    border-radius: var(--rad);
}

.empty-state svg {
    width: 64px;
    height: 64px;
    stroke: var(--c-green);
    opacity: 0.5;
    margin-bottom: 1rem;
}

.empty-state h3 {
    font-family: var(--f-head);
    margin-bottom: 0.5rem;
    color: var(--c-blue);
}

/* Modal */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.modal-overlay.visible {
    display: flex;
}

.modal {
    background: var(--c-dark);
    border: 1px solid var(--c-green);
    border-radius: var(--rad);
    padding: 2rem;
    max-width: 400px;
    width: 90%;
}

.modal h3 {
    font-family: var(--f-head);
    color: var(--c-green);
    margin-bottom: 1rem;
}

.modal-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1.5rem;
}

.modal-btn {
    flex: 1;
    padding: 0.8rem;
    border-radius: 6px;
    font-family: var(--f-body);
    cursor: pointer;
    transition: all 0.2s;
}

.modal-btn.cancel {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: var(--c-text);
}

.modal-btn.confirm {
    background: var(--grad);
    border: none;
    color: var(--c-black);
    font-weight: bold;
}

.toast {
    position: fixed;
    /*width: 100%; 
    height: auto;*/
    bottom: 2rem;
    right: 2rem;
    padding: 1rem 1.5rem;
    background: var(--c-dark);
    border: 1px solid var(--c-green);
    border-radius: 6px;
    color: var(--c-text);
    font-family: var(--f-body);
    z-index: 1001;
    animation: slideIn 0.3s ease;
}

.toast.error {
    border-color: #ff6b6b;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@media (max-width: 900px) {
    .robots-grid {
        grid-template-columns: 1fr;
    }
    
    .form-row {
        flex-direction: column;
    }
    
    .form-field {
        min-width: 100%;
    }
    
    .dash-header {
        flex-direction: column;
        text-align: center;
    }
}

/* ==================== API PLAYGROUND STYLES ==================== */
.playground-container {
    display: grid;
    grid-template-columns: 280px 1fr 1fr;
    gap: 1.5rem;
    height: calc(100vh - 200px);
    min-height: 500px;
}

.endpoint-list {
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--rad);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.endpoint-group-title {
    font-family: var(--f-head);
    font-size: 0.7rem;
    color: var(--c-blue);
    padding: 1rem 1rem 0.5rem 1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.endpoint-item {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1rem;
    cursor: pointer;
    transition: all 0.2s;
    border-left: 3px solid transparent;
}

.endpoint-item:hover {
    background: rgba(132, 250, 176, 0.05);
}

.endpoint-item.active {
    background: rgba(132, 250, 176, 0.1);
    border-left-color: var(--c-green);
}

.method-badge {
    font-size: 0.65rem;
    font-weight: bold;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    min-width: 45px;
    text-align: center;
}

.method-badge.get { background: rgba(97, 218, 251, 0.2); color: #61dafb; }
.method-badge.post { background: rgba(132, 250, 176, 0.2); color: var(--c-green); }
.method-badge.delete { background: rgba(255, 107, 107, 0.2); color: #ff6b6b; }
.method-badge.put { background: rgba(255, 193, 7, 0.2); color: #ffc107; }

.endpoint-path {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.8);
    font-family: var(--f-body);
}

.request-panel, .response-panel {
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--rad);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(0, 0, 0, 0.3);
}

.panel-title {
    font-family: var(--f-head);
    font-size: 0.9rem;
    color: var(--c-green);
}

.panel-body {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.input-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.input-group label {
    font-size: 0.7rem;
    color: var(--c-blue);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.api-input {
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    padding: 0.8rem;
    color: var(--c-text);
    font-family: var(--f-body);
    font-size: 0.85rem;
    transition: all 0.2s;
}

.api-input:focus {
    outline: none;
    border-color: var(--c-green);
    box-shadow: 0 0 10px rgba(132, 250, 176, 0.1);
}

.api-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

.code-editor {
    background: #000;
    border: 1px solid rgba(132, 250, 176, 0.3);
    border-radius: 6px;
    padding: 1rem;
    font-family: var(--f-body);
    font-size: 0.8rem;
    color: var(--c-green);
    resize: none;
    min-height: 150px;
    flex: 1;
}

.code-editor:focus {
    outline: none;
    border-color: var(--c-green);
}

.send-btn {
    background: var(--grad);
    border: none;
    border-radius: 6px;
    padding: 0.8rem 1.5rem;
    color: var(--c-black);
    font-family: var(--f-body);
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.send-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(132, 250, 176, 0.3);
}

.send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.send-btn svg {
    width: 16px;
    height: 16px;
}

.response-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.75rem;
    padding: 0.5rem 0;
}

.response-status {
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    font-weight: bold;
}

.response-status.success { background: rgba(132, 250, 176, 0.2); color: var(--c-green); }
.response-status.error { background: rgba(255, 107, 107, 0.2); color: #ff6b6b; }

.response-time {
    color: rgba(255, 255, 255, 0.5);
}

.response-body {
    background: #000;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    padding: 1rem;
    font-family: var(--f-body);
    font-size: 0.8rem;
    overflow: auto;
    flex: 1;
    white-space: pre-wrap;
    word-break: break-word;
}

.response-body .json-key { color: #61dafb; }
.response-body .json-string { color: var(--c-green); }
.response-body .json-number { color: #ffc107; }
.response-body .json-boolean { color: #ff6b6b; }
.response-body .json-null { color: #888; }

.url-preview {
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    padding: 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    overflow-x: auto;
}

.url-preview .method {
    color: var(--c-green);
    font-weight: bold;
}

.url-preview .url {
    color: rgba(255, 255, 255, 0.8);
}

.headers-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.header-row {
    display: flex;
    gap: 0.5rem;
}

.header-row input {
    flex: 1;
}

.tabs {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.tab-btn {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    padding: 0.5rem 1rem;
    color: rgba(255, 255, 255, 0.6);
    font-family: var(--f-body);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.tab-btn:hover {
    border-color: var(--c-green);
    color: var(--c-green);
}

.tab-btn.active {
    background: rgba(132, 250, 176, 0.1);
    border-color: var(--c-green);
    color: var(--c-green);
}

.endpoint-desc {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.5);
    padding: 0 1rem 0.5rem 1rem;
    line-height: 1.4;
}

.quick-fill {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.quick-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    padding: 0.3rem 0.6rem;
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    transition: all 0.2s;
}

.quick-btn:hover {
    background: rgba(132, 250, 176, 0.1);
    border-color: var(--c-green);
    color: var(--c-green);
}

.history-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.history-item:hover {
    background: rgba(132, 250, 176, 0.05);
}

.no-response {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: rgba(255, 255, 255, 0.3);
    text-align: center;
    gap: 1rem;
}

.no-response svg {
    width: 48px;
    height: 48px;
    opacity: 0.3;
}

@media (max-width: 1200px) {
    .playground-container {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr 1fr;
        height: auto;
    }

    .endpoint-list {
        max-height: 200px;
    }
}

@media (max-width: 900px) {
    .playground-container {
        gap: 1rem;
    }
}
   
/*<script>
    // UI Logic
    function tab(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        const btn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick').includes(id));
        if(btn) {
            btn.classList.add('active');
            if(window.innerWidth <= 900) btn.scrollIntoView({behavior:'smooth', block:'nearest', inline:'center'});
        }
        if(window.innerWidth <= 900) window.scrollTo({top:0, behavior:'smooth'});
    }

    // Contact Form
    function sendSignal(e) {
        e.preventDefault();
        const btn = document.querySelector('.submit-btn');
        const form = document.getElementById('cyberForm');
        const success = document.getElementById('successMessage');
        
        btn.classList.add('loading');
        btn.querySelector('.btn-text').textContent = '/// TRANSMITTING...';
        
        setTimeout(() => {
            form.style.display = 'none';
            success.style.display = 'flex';
            btn.classList.remove('loading');
            btn.querySelector('.btn-text').textContent = 'TRANSMIT DATA';
        }, 1500);
    }

    function resetForm() {
        const form = document.getElementById('cyberForm');
        const success = document.getElementById('successMessage');
        
        form.reset();
        success.style.display = 'none';
        form.style.display = 'block';
        form.style.animation = 'fadeIn 0.5s ease';
    }

    // Demo Logic
    const bals = { hub: 10000, vac: 500, chg: 200, thm: 150, lit: 80, rep: 300 };
    let txC = 0, vol = 0, esc = 0;

    function upBal(d, v) {
        bals[d] += v;
        const el = document.getElementById('b_' + d);
        el.innerText = bals[d];
        el.style.color = v > 0 ? '#84FAB0' : '#ff4757';
        setTimeout(() => el.style.color = '#84FAB0', 500);
    }

    function log(m, type='info') {
        const box = document.getElementById('log_box');
        const row = document.createElement('div');
        row.className = 'log-item ' + (type==='err'?'log-err':(type==='ok'?'log-success':''));
        const t = new Date().toLocaleTimeString('en-US',{hour12:false,hour:'2-digit',minute:'2-digit',second:'2-digit'});
        row.innerHTML = `<span>[${t}]</span> ${m}`;
        box.insertBefore(row, box.firstChild);
        if(box.children.length > 15) box.removeChild(box.lastChild);
    }

    function drawTx(f, t, v, cb) {
        const fEl = document.getElementById('d_' + f);
        const tEl = document.getElementById('d_' + t);
        const top = document.getElementById('topo');
        if(window.innerWidth > 900) {
            const rF = fEl.getBoundingClientRect();
            const rT = tEl.getBoundingClientRect();
            const rC = top.getBoundingClientRect();
            const x1 = rF.left + rF.width/2 - rC.left;
            const y1 = rF.top + rF.height/2 - rC.top;
            const x2 = rT.left + rT.width/2 - rC.left;
            const y2 = rT.top + rT.height/2 - rC.top;
            const svg = document.getElementById('tx_svg');
            svg.innerHTML = `<defs><linearGradient id="g"><stop offset="0%" stop-color="#84FAB0"/><stop offset="100%" stop-color="#8FD3F4"/></linearGradient></defs><line class="tx-p" x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" style="stroke:url(#g)"></line>`;
            setTimeout(() => svg.innerHTML = '', 600);
        }
        fEl.classList.add('active'); tEl.classList.add('active');
        setTimeout(() => {
            fEl.classList.remove('active'); tEl.classList.remove('active');
            if(cb) cb();
        }, 600);
    }

    function stats() {
        document.getElementById('st_tx').innerText = txC;
        document.getElementById('st_vol').innerText = vol;
        document.getElementById('st_esc').innerText = esc;
    }

    function runClean() {
        const b = document.getElementById('btn_cln'); b.disabled = true;
        log('Task: Clean Room requested.');
        drawTx('hub', 'vac', 25, () => {
            upBal('hub', -25); upBal('vac', 25); txC++; vol+=25; stats();
            log('TX: Hub -> Cleaner (25 CR)', 'ok');
            document.getElementById('s_vac').innerText = 'WORK';
            setTimeout(() => {
                document.getElementById('s_vac').innerText = 'IDLE';
                document.getElementById('bt_vac').style.width = '50%';
                log('Task Complete.', 'ok'); b.disabled = false;
            }, 1500);
        });
    }

    function runCharge() {
        const b = document.getElementById('btn_chg'); b.disabled = true;
        log('Power: Charge needed.');
        drawTx('vac', 'chg', 15, () => {
            upBal('vac', -15); upBal('chg', 15); txC++; vol+=15; stats();
            log('TX: Cleaner -> Charger (15 CR)', 'ok');
            document.getElementById('s_vac').innerText = 'CHRG';
            setTimeout(() => {
                document.getElementById('s_vac').innerText = 'IDLE';
                document.getElementById('bt_vac').style.width = '100%';
                log('Battery Full.', 'ok'); b.disabled = false;
            }, 1500);
        });
    }

    function runLight() {
        const b = document.getElementById('btn_lit'); b.disabled = true;
        drawTx('hub', 'lit', 1, () => {
            upBal('hub', -1); upBal('lit', 1); txC++; vol+=1; stats();
            const l = document.getElementById('s_lit');
            l.innerText = l.innerText === 'OFF' ? 'ON' : 'OFF';
            log('TX: Hub -> Lights (1 CR)', 'ok'); b.disabled = false;
        });
    }

    function runTemp() {
        const b = document.getElementById('btn_tmp'); b.disabled = true;
        drawTx('hub', 'thm', 5, () => {
            upBal('hub', -5); upBal('thm', 5); txC++; vol+=5; stats();
            document.getElementById('s_thm').innerText = (20 + Math.floor(Math.random()*5)) + 'Â°C';
            log('TX: Hub -> Thermo (5 CR)', 'ok'); b.disabled = false;
        });
    }

    function runRepair() {
        const b = document.getElementById('btn_rep'); b.disabled = true;
        log('Escrow: Repair requested.');
        upBal('hub', -50); esc++; stats();
        log('Funds Locked (50 CR). Waiting...', 'warn');
        document.getElementById('s_vac').innerText = 'BROKEN';
        document.getElementById('s_rep').innerText = 'FIX';
        setTimeout(() => {
            drawTx('hub', 'rep', 50, () => {
                upBal('rep', 50); txC++; vol+=50; stats();
                document.getElementById('s_vac').innerText = 'IDLE';
                document.getElementById('s_rep').innerText = 'STDBY';
                log('Escrow Released -> Repair Bot', 'ok'); b.disabled = false;
            });
        }, 2000);
    }

    function runBatch() {
        const b = document.getElementById('btn_btc'); b.disabled = true;
        log('Batch: Monthly settlement...', 'warn');
        let i = 0;
        const ops = [
            {f:'vac',t:'hub',v:10}, {f:'chg',t:'hub',v:15},
            {f:'thm',t:'hub',v:5}, {f:'lit',t:'hub',v:2}
        ];
        function nxt() {
            if(i >= ops.length) { log('Batch Complete.', 'ok'); b.disabled = false; return; }
            const o = ops[i];
            drawTx(o.f, o.t, o.v, () => {
                upBal(o.f, -o.v); upBal(o.t, o.v); txC++; vol+=o.v; stats();
                log(`TX: ${o.f.toUpperCase()} -> HUB (${o.v})`);
                i++; setTimeout(nxt, 300);
            });
        }
        nxt();
    }

    // ==================== DASHBOARD LOGIC ====================
    let currentUser = null;
    let userRobots = [];

    // Check auth status on page load
    async function checkAuth() {
        try {
            const res = await fetch('/auth/status');
            const data = await res.json();
            
            if (data.authenticated) {
                currentUser = data.user;
                showAuthenticatedUI();
                loadRobots();
            } else {
                showLoginPrompt();
            }
        } catch (err) {
            console.error('Auth check failed:', err);
            showLoginPrompt();
        }
    }

    function showLoginPrompt() {
        document.getElementById('loginPrompt').style.display = 'block';
        document.getElementById('dashContent').classList.remove('visible');
        document.getElementById('authContainer').innerHTML = `
            <button class="auth-btn" onclick="window.location.href='/auth/google'">
                <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Sign in with Google
            </button>
        `;
    }

    function showAuthenticatedUI() {
        document.getElementById('loginPrompt').style.display = 'none';
        document.getElementById('dashContent').classList.add('visible');
        document.getElementById('authContainer').innerHTML = `
            <div class="user-info">
                <img src="${currentUser.avatar || 'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><circle cx=%2212%22 cy=%228%22 r=%224%22 fill=%22%2384FAB0%22/><path d=%22M4 20c0-4 4-6 8-6s8 2 8 6%22 fill=%22%2384FAB0%22/></svg>'}" 
                     alt="Avatar" class="user-avatar" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><circle cx=%2212%22 cy=%228%22 r=%224%22 fill=%22%2384FAB0%22/><path d=%22M4 20c0-4 4-6 8-6s8 2 8 6%22 fill=%22%2384FAB0%22/></svg>'">
                <div>
                    <div class="user-name">${escapeHtml(currentUser.name)}</div>
                    <div class="user-email">${escapeHtml(currentUser.email)}</div>
                </div>
            </div>
            <button class="auth-btn logout-btn" onclick="window.location.href='/auth/logout'">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                    <polyline points="16 17 21 12 16 7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                </svg>
                Sign Out
            </button>
        `;
    }

    async function loadRobots() {
        try {
            const res = await fetch('/api/robots');
            const data = await res.json();
            userRobots = data.robots || [];
            renderRobots();
        } catch (err) {
            console.error('Failed to load robots:', err);
            showToast('Failed to load robots', true);
        }
    }

    function renderRobots() {
        const grid = document.getElementById('robotsGrid');
        const empty = document.getElementById('emptyState');
        
        if (userRobots.length === 0) {
            empty.style.display = 'block';
            grid.innerHTML = '';
            return;
        }
        
        empty.style.display = 'none';
        grid.innerHTML = userRobots.map(robot => `
            <div class="robot-card" data-id="${robot.id}">
                <div class="robot-header">
                    <div>
                        <div class="robot-name">${escapeHtml(robot.name)}</div>
                        <div class="robot-id">${robot.id}</div>
                    </div>
                    <span class="robot-status ${robot.status}">${robot.status.toUpperCase()}</span>
                </div>
                
                <div class="robot-credits">
                    <span class="credits-value">${formatNumber(robot.credits)}</span>
                    <span class="credits-label">CREDITS</span>
                </div>
                
                <div class="api-key-box">
                    <span class="api-key-text hidden" id="key-${robot.id}">${robot.apiKey}</span>
                    <button class="icon-btn" onclick="toggleKeyVisibility('${robot.id}')" title="Show/Hide">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                    <button class="icon-btn" onclick="copyApiKey('${robot.apiKey}')" title="Copy">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2"/>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                        </svg>
                    </button>
                </div>
                
                <div class="robot-actions">
                    <button class="robot-action-btn" onclick="showAddCreditsModal('${robot.id}')">+ Credits</button>
                    <button class="robot-action-btn" onclick="regenerateKey('${robot.id}')">New Key</button>
                    <button class="robot-action-btn danger" onclick="deleteRobot('${robot.id}', '${escapeHtml(robot.name)}')">Delete</button>
                </div>
                
                <div class="robot-meta">
                    <span>TX: ${robot.totalTransactions || 0}</span>
                    <span>${robot.lastUsed ? 'Last: ' + new Date(robot.lastUsed).toLocaleDateString() : 'Never used'}</span>
                </div>
            </div>
        `).join('');
    }

    async function createRobot() {
        const nameInput = document.getElementById('robotName');
        const creditsInput = document.getElementById('robotCredits');
        const btn = document.getElementById('createBtn');
        
        const name = nameInput.value.trim();
        const credits = parseInt(creditsInput.value) || 1000;
        
        if (!name || name.length < 2) {
            showToast('Robot name must be at least 2 characters', true);
            return;
        }
        
        btn.disabled = true;
        btn.textContent = 'CREATING...';
        
        try {
            const res = await fetch('/api/robots', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, credits })
            });
            
            const data = await res.json();
            
            if (res.ok) {
                userRobots.push(data.robot);
                renderRobots();
                nameInput.value = '';
                creditsInput.value = '1000';
                showToast(`Robot "${name}" created successfully!`);
            } else {
                showToast(data.error || 'Failed to create robot', true);
            }
        } catch (err) {
            showToast('Network error', true);
        } finally {
            btn.disabled = false;
            btn.textContent = '+ CREATE ROBOT';
        }
    }

    function toggleKeyVisibility(robotId) {
        const keyEl = document.getElementById('key-' + robotId);
        keyEl.classList.toggle('hidden');
    }

    async function copyApiKey(apiKey) {
        try {
            await navigator.clipboard.writeText(apiKey);
            showToast('API key copied to clipboard!');
        } catch (err) {
            // Fallback
            const textarea = document.createElement('textarea');
            textarea.value = apiKey;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            showToast('API key copied!');
        }
    }

    function showAddCreditsModal(robotId) {
        const modal = document.createElement('div');
        modal.className = 'modal-overlay visible';
        modal.id = 'creditsModal';
        modal.innerHTML = `
            <div class="modal">
                <h3>/// ADD CREDITS</h3>
                <div class="form-field">
                    <label>Amount to Add</label>
                    <input type="number" id="addCreditsAmount" value="1000" min="1" max="100000" style="margin-top: 0.5rem;">
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel" onclick="closeModal('creditsModal')">Cancel</button>
                    <button class="modal-btn confirm" onclick="addCredits('${robotId}')">Add Credits</button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }

    async function addCredits(robotId) {
        const amount = parseInt(document.getElementById('addCreditsAmount').value);
        
        if (!amount || amount < 1) {
            showToast('Invalid amount', true);
            return;
        }
        
        try {
            const res = await fetch(`/api/robots/${robotId}/credits`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ amount })
            });
            
            const data = await res.json();
            
            if (res.ok) {
                const robot = userRobots.find(r => r.id === robotId);
                if (robot) robot.credits = data.credits;
                renderRobots();
                closeModal('creditsModal');
                showToast(`Added ${formatNumber(amount)} credits!`);
            } else {
                showToast(data.error || 'Failed to add credits', true);
            }
        } catch (err) {
            showToast('Network error', true);
        }
    }

    async function regenerateKey(robotId) {
        if (!confirm('Generate a new API key? The old key will stop working immediately.')) return;
        
        try {
            const res = await fetch(`/api/robots/${robotId}/regenerate-key`, {
                method: 'POST'
            });
            
            const data = await res.json();
            
            if (res.ok) {
                const robot = userRobots.find(r => r.id === robotId);
                if (robot) robot.apiKey = data.apiKey;
                renderRobots();
                showToast('New API key generated!');
            } else {
                showToast(data.error || 'Failed to regenerate key', true);
            }
        } catch (err) {
            showToast('Network error', true);
        }
    }

    async function deleteRobot(robotId, robotName) {
        if (!confirm(`Delete robot "${robotName}"? This cannot be undone.`)) return;
        
        try {
            const res = await fetch(`/api/robots/${robotId}`, {
                method: 'DELETE'
            });
            
            if (res.ok) {
                userRobots = userRobots.filter(r => r.id !== robotId);
                renderRobots();
                showToast('Robot deleted');
            } else {
                const data = await res.json();
                showToast(data.error || 'Failed to delete robot', true);
            }
        } catch (err) {
            showToast('Network error', true);
        }
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) modal.remove();
    }

    function showToast(message, isError = false) {
        const existing = document.querySelector('.toast');
        if (existing) existing.remove();
        
        const toast = document.createElement('div');
        toast.className = 'toast' + (isError ? ' error' : '');
        toast.textContent = message;
        document.body.appendChild(toast);
        
        setTimeout(() => toast.remove(), 3000);
    }

    function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

    function escapeHtml(str) {
        if (!str) return '';
        return str.replace(/&/g, '&amp;')
                  .replace(/</g, '&lt;')
                  .replace(/>/g, '&gt;')
                  .replace(/"/g, '&quot;');
    }

    // Initialize dashboard when section is shown
    const originalTab = tab;
    tab = function(id) {
        originalTab(id);
        if (id === 'dashboard' && !currentUser) {
            checkAuth();
        }
    };

    // Check if we landed on dashboard (from OAuth callback)
    if (window.location.hash === '#dashboard' || window.location.search.includes('auth=success')) {
        setTimeout(() => {
            tab('dashboard');
            checkAuth();
        }, 100);
    }

    // Handle Enter key in create form
    document.addEventListener('DOMContentLoaded', () => {
        const nameInput = document.getElementById('robotName');
        const creditsInput = document.getElementById('robotCredits');
        
        [nameInput, creditsInput].forEach(input => {
            if (input) {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') createRobot();
                });
            }
        });

        // Initialize API Playground
        initPlayground();
    });

    // ==================== API PLAYGROUND LOGIC ====================
    const endpoints = {
        'me': {
            method: 'GET',
            path: '/api/v1/me',
            description: 'Get information about the authenticated robot account including ID, name, credits, and status.',
            requiresApiKey: true,
            body: null
        },
        'balance': {
            method: 'GET', 
            path: '/api/v1/balance',
            description: 'Get the current credit balance and status of the robot.',
            requiresApiKey: true,
            body: null
        },
        'transactions': {
            method: 'GET',
            path: '/api/v1/transactions', 
            description: 'List the last 100 transactions for this robot (sent and received).',
            requiresApiKey: true,
            body: null
        },
        'transfer': {
            method: 'POST',
            path: '/api/v1/transfer',
            description: 'Transfer credits to another robot. Requires recipient API key, amount, and optional memo.',
            requiresApiKey: true,
            body: JSON.stringify({
                recipientApiKey: "rbx_recipient_key_here",
                amount: 100,
                memo: "Payment for services"
            }, null, 2)
        },
        'deduct': {
            method: 'POST',
            path: '/api/v1/deduct',
            description: 'Deduct credits from the robot\'s own balance (self-service fee, usage tracking, etc).',
            requiresApiKey: true,
            body: JSON.stringify({
                amount: 10,
                reason: "API usage fee"
            }, null, 2)
        },
        'robots-list': {
            method: 'GET',
            path: '/api/robots',
            description: 'List all robots owned by the authenticated user. Requires Google OAuth session.',
            requiresApiKey: false,
            body: null
        },
        'robots-create': {
            method: 'POST',
            path: '/api/robots',
            description: 'Create a new robot. Requires Google OAuth session. Max 20 robots per user.',
            requiresApiKey: false,
            body: JSON.stringify({
                name: "My New Robot",
                credits: 1000
            }, null, 2)
        },
        'robots-credits': {
            method: 'POST',
            path: '/api/robots/:id/credits',
            description: 'Add credits to a robot you own. Replace :id with the robot ID.',
            requiresApiKey: false,
            hasPathParam: true,
            body: JSON.stringify({
                amount: 500
            }, null, 2)
        },
        'robots-delete': {
            method: 'DELETE',
            path: '/api/robots/:id',
            description: 'Delete a robot you own. Replace :id with the robot ID. Cannot undo!',
            requiresApiKey: false,
            hasPathParam: true,
            body: null
        },
        'auth-status': {
            method: 'GET',
            path: '/auth/status',
            description: 'Check if the current session is authenticated and get user info.',
            requiresApiKey: false,
            body: null
        }
    };

    let currentEndpoint = 'me';
    let lastResponse = null;

    function initPlayground() {
        // Set up endpoint click handlers
        document.querySelectorAll('.endpoint-item').forEach(item => {
            item.addEventListener('click', () => {
                selectEndpoint(item.dataset.endpoint);
            });
        });

        // Load API keys from robots for quick fill
        updateQuickFillKeys();

        // Sync API key input with header
        const apiKeyInput = document.getElementById('apiKeyInput');
        if (apiKeyInput) {
            apiKeyInput.addEventListener('input', (e) => {
                document.getElementById('headerApiKey').value = e.target.value;
            });
        }
    }

    function selectEndpoint(endpointId) {
        currentEndpoint = endpointId;
        const endpoint = endpoints[endpointId];

        // Update active state
        document.querySelectorAll('.endpoint-item').forEach(item => {
            item.classList.remove('active');
            if (item.dataset.endpoint === endpointId) {
                item.classList.add('active');
            }
        });

        // Update URL preview
        document.getElementById('previewMethod').textContent = endpoint.method;
        document.getElementById('previewUrl').textContent = endpoint.path;

        // Update description
        document.getElementById('endpointDescription').textContent = endpoint.description;

        // Show/hide path params
        const pathParamsGroup = document.getElementById('pathParamsGroup');
        if (endpoint.hasPathParam) {
            pathParamsGroup.style.display = 'block';
        } else {
            pathParamsGroup.style.display = 'none';
        }

        // Update body tab
        const bodyTab = document.getElementById('requestBody');
        if (endpoint.body) {
            bodyTab.value = endpoint.body;
            bodyTab.disabled = false;
        } else {
            bodyTab.value = '// No body required for this endpoint';
            bodyTab.disabled = true;
        }

        // Auto-switch to body tab for POST requests
        if (endpoint.method === 'POST' && endpoint.body) {
            switchTab('body');
        } else {
            switchTab('params');
        }
    }

    function switchTab(tabName) {
        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.style.display = 'none';
        });

        // Show selected tab
        document.getElementById(tabName + 'Tab').style.display = 'block';

        // Update tab buttons
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.textContent.toLowerCase() === tabName) {
                btn.classList.add('active');
            }
        });
    }

    function updateQuickFillKeys() {
        const container = document.getElementById('quickFillKeys');
        if (!container) return;

        // Get keys from userRobots if available
        if (userRobots && userRobots.length > 0) {
            container.innerHTML = userRobots.map(robot => `
                <button class="quick-btn" onclick="fillApiKey('${robot.apiKey}')" title="${escapeHtml(robot.name)}">
                    ${escapeHtml(robot.name.substring(0, 10))}${robot.name.length > 10 ? '...' : ''}
                </button>
            `).join('');
        } else {
            container.innerHTML = '<span style="font-size: 0.7rem; color: rgba(255,255,255,0.4);">Login to see your robot keys</span>';
        }
    }

    function fillApiKey(key) {
        document.getElementById('apiKeyInput').value = key;
        document.getElementById('headerApiKey').value = key;
        showToast('API key filled!');
    }

    async function sendApiRequest() {
        const endpoint = endpoints[currentEndpoint];
        const btn = document.getElementById('sendRequestBtn');
        const apiKey = document.getElementById('apiKeyInput').value;
        const pathParam = document.getElementById('pathParamInput')?.value;

        // Build URL
        let url = endpoint.path;
        if (endpoint.hasPathParam && pathParam) {
            url = url.replace(':id', pathParam);
        }

        // Prepare headers
        const headers = {
            'Content-Type': 'application/json'
        };

        if (endpoint.requiresApiKey && apiKey) {
            headers['X-API-Key'] = apiKey;
        }

        // Prepare body
        let body = null;
        if (endpoint.method === 'POST' || endpoint.method === 'PUT') {
            try {
                const bodyText = document.getElementById('requestBody').value;
                if (bodyText && !bodyText.startsWith('//')) {
                    body = bodyText;
                    JSON.parse(body); // Validate JSON
                }
            } catch (e) {
                showToast('Invalid JSON in request body', true);
                return;
            }
        }

        // Update UI
        btn.disabled = true;
        btn.innerHTML = `
            <svg class="spin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" stroke-dasharray="30 70"/>
            </svg>
            SENDING...
        `;

        // Hide no-response placeholder
        document.getElementById('noResponse').style.display = 'none';
        document.getElementById('responseMeta').style.display = 'none';

        const startTime = performance.now();

        try {
            const response = await fetch(url, {
                method: endpoint.method,
                headers: headers,
                body: body,
                credentials: 'same-origin'
            });

            const endTime = performance.now();
            const duration = Math.round(endTime - startTime);

            let data;
            const contentType = response.headers.get('content-type');
            if (contentType && contentType.includes('application/json')) {
                data = await response.json();
            } else {
                data = await response.text();
            }

            lastResponse = data;

            // Update response UI
            const statusEl = document.getElementById('responseStatus');
            statusEl.textContent = `${response.status} ${response.statusText}`;
            statusEl.className = 'response-status ' + (response.ok ? 'success' : 'error');

            document.getElementById('responseTime').textContent = `${duration}ms`;
            document.getElementById('responseMeta').style.display = 'flex';

            // Format and display response
            const responseBody = document.getElementById('responseBody');
            if (typeof data === 'object') {
                responseBody.innerHTML = syntaxHighlight(JSON.stringify(data, null, 2));
            } else {
                responseBody.textContent = data;
            }

        } catch (error) {
            const endTime = performance.now();
            const duration = Math.round(endTime - startTime);

            document.getElementById('responseStatus').textContent = 'Error';
            document.getElementById('responseStatus').className = 'response-status error';
            document.getElementById('responseTime').textContent = `${duration}ms`;
            document.getElementById('responseMeta').style.display = 'flex';

            document.getElementById('responseBody').innerHTML = `<span style="color: #ff6b6b;">Network Error: ${error.message}</span>`;
            lastResponse = { error: error.message };
        }

        // Reset button
        btn.disabled = false;
        btn.innerHTML = `
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
            SEND
        `;

        // Update quick fill keys if we got robots data
        if (currentEndpoint === 'robots-list' && lastResponse && lastResponse.robots) {
            userRobots = lastResponse.robots;
            updateQuickFillKeys();
        }
    }

    function syntaxHighlight(json) {
        json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
            let cls = 'json-number';
            if (/^"/.test(match)) {
                if (/:$/.test(match)) {
                    cls = 'json-key';
                } else {
                    cls = 'json-string';
                }
            } else if (/true|false/.test(match)) {
                cls = 'json-boolean';
            } else if (/null/.test(match)) {
                cls = 'json-null';
            }
            return '<span class="' + cls + '">' + match + '</span>';
        });
    }

    function copyResponse() {
        if (!lastResponse) {
            showToast('No response to copy', true);
            return;
        }

        const text = typeof lastResponse === 'object' 
            ? JSON.stringify(lastResponse, null, 2) 
            : lastResponse;

        navigator.clipboard.writeText(text).then(() => {
            showToast('Response copied to clipboard!');
        }).catch(() => {
            showToast('Failed to copy', true);
        });
    }

    // CSS for spinning loader
    const style = document.createElement('style');
    style.textContent = `
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spin {
            animation: spin 1s linear infinite;
        }
    `;
    document.head.appendChild(style);
</script>*/